@model IEnumerable<Keno.Model.Statistics>

@{
    ViewBag.Title = "Thống kê";
}

<link rel="stylesheet" href="@Url.Content("~/Areas/Admin/Content/Chart.min.css")">
<script src="@Url.Content("~/Areas/Admin/Content/Chart.min.js")"></script>
<div>
    Tháng @Html.DropDownList("Months")
    <canvas id="chart"></canvas>
</div>
@section scripts{
<script>
    $(document).ready(function(){
        $('#Months').on('change', function(){
            window.location.href = '@Url.Action("Index", new { productID = 0 })' + '&month=' + $(this).val();
        });
    });
    var statisticsData = @(Html.Raw(Json.Encode(Model)));
    
    var data = statisticsData.map(function(e){ return e.Accessions });
    var labels = statisticsData.map(function(e){ return 'Ngày ' + e.Day });
    renderChart(data, labels);

    function renderChart(data, labels) {
        var ctx = document.getElementById("chart").getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Lượt truy cập trong tháng',
                    data: data,
                }]
            },
        });
    }
</script>
}
